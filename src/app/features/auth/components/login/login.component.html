<div class="login-container">
  <div class="login-card">
    <!-- Logo et titre -->
    <div class="login-header">
      <h1 class="app-title">ClassHub</h1>
      <p class="app-subtitle">Connectez-vous à votre compte</p>
    </div>

    <!-- Formulaire de connexion -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Email -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          formControlName="email"
          placeholder="votre@email.com"
          autocomplete="email"
        />
        <mat-icon matPrefix>email</mat-icon>
        @if (emailControl?.invalid && emailControl?.touched) {
          <mat-error>{{ emailErrorMessage }}</mat-error>
        }
      </mat-form-field>

      <!-- Mot de passe -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Mot de passe</mat-label>
        <input
          matInput
          [type]="hidePassword() ? 'password' : 'text'"
          formControlName="password"
          placeholder="••••••••"
          autocomplete="current-password"
        />
        <mat-icon matPrefix>lock</mat-icon>
        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="togglePasswordVisibility()"
          [attr.aria-label]="'Masquer le mot de passe'"
          [attr.aria-pressed]="!hidePassword()"
        >
          <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        @if (passwordControl?.invalid && passwordControl?.touched) {
          <mat-error>{{ passwordErrorMessage }}</mat-error>
        }
      </mat-form-field>

      <!-- Se souvenir de moi -->
      <div class="login-options">
        <mat-checkbox formControlName="rememberMe"> Se souvenir de moi </mat-checkbox>
        <a routerLink="/auth/forgot-password" class="forgot-password-link">
          Mot de passe oublié ?
        </a>
      </div>

      <!-- Message d'erreur global -->
      @if (errorMessage()) {
        <div class="error-message">
          <mat-icon>error</mat-icon>
          <span>{{ errorMessage() }}</span>
        </div>
      }

      <!-- Bouton de connexion -->
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="login-button"
        [disabled]="isLoading() || loginForm.invalid"
      >
        @if (isLoading()) {
          <mat-spinner diameter="20"></mat-spinner>
          <span>Connexion...</span>
        } @else {
          <span>Se connecter</span>
        }
      </button>
    </form>

    <!-- Lien d'inscription -->
    <div class="login-footer">
      <p>
        Vous n'avez pas encore de compte ?
        <a routerLink="/auth/register" class="register-link">S'inscrire</a>
      </p>
    </div>
  </div>
</div>
