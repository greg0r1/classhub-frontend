// ============================================
// CLASSHUB - STYLES GLOBAUX
// ============================================

// IMPORTANT: All @use rules MUST come before any other rules
@use '@angular/material' as mat;
@use 'styles/tokens-forward' as *;

// ============================================
// MATERIAL THEME CONFIGURATION
// ============================================

// Include Material core styles
@include mat.core();

// Define custom Material palette using our tokens
$classhub-primary: mat.m2-define-palette(
  (
    50: $primary-50,
    100: $primary-100,
    200: $primary-200,
    300: $primary-300,
    400: $primary-400,
    500: $primary-500,
    600: $primary-600,
    700: $primary-700,
    800: $primary-800,
    900: $primary-900,
    contrast: (
      50: $gray-900,
      100: $gray-900,
      200: $gray-900,
      300: white,
      400: white,
      500: white,
      600: white,
      700: white,
      800: white,
      900: white,
    ),
  )
);

$classhub-accent: mat.m2-define-palette(
  (
    50: $accent-50,
    100: $accent-100,
    200: $accent-200,
    300: $accent-300,
    400: $accent-400,
    500: $accent-500,
    600: $accent-600,
    700: $accent-700,
    800: $accent-800,
    900: $accent-900,
    contrast: (
      50: $gray-900,
      100: $gray-900,
      200: $gray-900,
      300: white,
      400: white,
      500: white,
      600: white,
      700: white,
      800: white,
      900: white,
    ),
  )
);

$classhub-warn: mat.m2-define-palette(
  (
    50: #ffebee,
    100: #ffcdd2,
    200: #ef9a9a,
    300: #e57373,
    400: #ef5350,
    500: $error-main,
    600: #e53935,
    700: $error-dark,
    800: #c62828,
    900: #b71c1c,
    contrast: (
      50: $gray-900,
      100: $gray-900,
      200: $gray-900,
      300: white,
      400: white,
      500: white,
      600: white,
      700: white,
      800: white,
      900: white,
    ),
  )
);

// Create the theme
$classhub-theme: mat.m2-define-light-theme(
  (
    color: (
      primary: $classhub-primary,
      accent: $classhub-accent,
      warn: $classhub-warn,
    ),
    typography:
      mat.m2-define-typography-config(
        $font-family: $font-family-primary,
      ),
    density: 0,
  )
);

// Include Material theme
@include mat.all-component-themes($classhub-theme);

// ============================================
// GLOBAL RESET
// ============================================

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: $font-family-primary;
  font-size: $font-size-base;
  line-height: $line-height-normal;
  color: $color-text-primary;
  background-color: $color-background;
}

html,
body {
  height: 100%;
}

// ============================================
// TYPOGRAPHY
// ============================================

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: $font-weight-semibold;
  line-height: $line-height-tight;
  color: $color-text-primary;
  margin-bottom: $spacing-4;
}

h1 {
  font-size: $font-size-4xl;
}
h2 {
  font-size: $font-size-3xl;
}
h3 {
  font-size: $font-size-2xl;
}
h4 {
  font-size: $font-size-xl;
}
h5 {
  font-size: $font-size-lg;
}
h6 {
  font-size: $font-size-base;
}

p {
  margin-bottom: $spacing-4;

  &:last-child {
    margin-bottom: 0;
  }
}

a {
  color: $primary-500;
  text-decoration: none;
  transition: color $transition-fast;

  &:hover {
    color: $primary-700;
    text-decoration: underline;
  }
}

// ============================================
// UTILITY CLASSES
// ============================================

// Text Utilities
.text-center {
  text-align: center;
}
.text-left {
  text-align: left;
}
.text-right {
  text-align: right;
}

.text-primary {
  color: $color-text-primary;
}
.text-secondary {
  color: $color-text-secondary;
}
.text-muted {
  color: $color-text-disabled;
}

.text-xs {
  font-size: $font-size-xs;
}
.text-sm {
  font-size: $font-size-sm;
}
.text-base {
  font-size: $font-size-base;
}
.text-lg {
  font-size: $font-size-lg;
}
.text-xl {
  font-size: $font-size-xl;
}
.text-2xl {
  font-size: $font-size-2xl;
}

.font-light {
  font-weight: $font-weight-light;
}
.font-normal {
  font-weight: $font-weight-regular;
}
.font-medium {
  font-weight: $font-weight-medium;
}
.font-semibold {
  font-weight: $font-weight-semibold;
}
.font-bold {
  font-weight: $font-weight-bold;
}

// Spacing Utilities
.m-0 {
  margin: 0 !important;
}
.mt-1 {
  margin-top: $spacing-2;
}
.mt-2 {
  margin-top: $spacing-4;
}
.mt-3 {
  margin-top: $spacing-6;
}
.mt-4 {
  margin-top: $spacing-8;
}

.mb-1 {
  margin-bottom: $spacing-2;
}
.mb-2 {
  margin-bottom: $spacing-4;
}
.mb-3 {
  margin-bottom: $spacing-6;
}
.mb-4 {
  margin-bottom: $spacing-8;
}

.ml-1 {
  margin-left: $spacing-2;
}
.ml-2 {
  margin-left: $spacing-4;
}
.ml-3 {
  margin-left: $spacing-6;
}

.mr-1 {
  margin-right: $spacing-2;
}
.mr-2 {
  margin-right: $spacing-4;
}
.mr-3 {
  margin-right: $spacing-6;
}

.p-0 {
  padding: 0 !important;
}
.p-1 {
  padding: $spacing-2;
}
.p-2 {
  padding: $spacing-4;
}
.p-3 {
  padding: $spacing-6;
}
.p-4 {
  padding: $spacing-8;
}

.px-2 {
  padding-left: $spacing-4;
  padding-right: $spacing-4;
}
.px-3 {
  padding-left: $spacing-6;
  padding-right: $spacing-6;
}
.py-2 {
  padding-top: $spacing-4;
  padding-bottom: $spacing-4;
}
.py-3 {
  padding-top: $spacing-6;
  padding-bottom: $spacing-6;
}

// Layout Utilities
.container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: $spacing-4;
  padding-right: $spacing-4;

  @include respond-to('sm') {
    max-width: $container-sm;
  }
  @include respond-to('md') {
    max-width: $container-md;
  }
  @include respond-to('lg') {
    max-width: $container-lg;
  }
  @include respond-to('xl') {
    max-width: $container-xl;
  }
  @include respond-to('xxl') {
    max-width: $container-xxl;
  }
}

.full-width {
  width: 100%;
}
.full-height {
  height: 100%;
}

.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.flex-row {
  flex-direction: row;
}
.flex-wrap {
  flex-wrap: wrap;
}

.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.items-start {
  align-items: flex-start;
}
.items-center {
  align-items: center;
}
.items-end {
  align-items: flex-end;
}
.items-stretch {
  align-items: stretch;
}

.justify-start {
  justify-content: flex-start;
}
.justify-center {
  justify-content: center;
}
.justify-end {
  justify-content: flex-end;
}
.justify-between {
  justify-content: space-between;
}
.justify-around {
  justify-content: space-around;
}

.gap-1 {
  gap: $spacing-1;
}
.gap-2 {
  gap: $spacing-2;
}
.gap-3 {
  gap: $spacing-3;
}
.gap-4 {
  gap: $spacing-4;
}
.gap-6 {
  gap: $spacing-6;
}
.gap-8 {
  gap: $spacing-8;
}

.grid {
  display: grid;
}

// Hide/Show
.hidden {
  display: none;
}
.block {
  display: block;
}
.inline-block {
  display: inline-block;
}

// ============================================
// CUSTOM SCROLLBAR
// ============================================

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: $gray-100;
  border-radius: $border-radius-sm;
}

::-webkit-scrollbar-thumb {
  background: $gray-400;
  border-radius: $border-radius-sm;

  &:hover {
    background: $gray-500;
  }
}

// ============================================
// MATERIAL OVERRIDES
// ============================================

// Snackbar
.success-snackbar {
  --mdc-snackbar-container-color: #{$success-main};
  --mat-snack-bar-button-color: white;
}

.error-snackbar {
  --mdc-snackbar-container-color: #{$error-main};
  --mat-snack-bar-button-color: white;
}

.warning-snackbar {
  --mdc-snackbar-container-color: #{$warning-main};
  --mat-snack-bar-button-color: white;
}

.info-snackbar {
  --mdc-snackbar-container-color: #{$info-main};
  --mat-snack-bar-button-color: white;
}

// Cards
.mat-mdc-card {
  @include card;
}

// Focus visible (accessibility)
*:focus-visible {
  outline: 2px solid $primary-500;
  outline-offset: 2px;
  box-shadow: $shadow-focus;
}

// ============================================
// ANIMATIONS
// ============================================

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes slideInDown {
  from {
    transform: translateY(-100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.fade-in {
  animation: fadeIn $transition-base ease-out;
}

.fade-out {
  animation: fadeOut $transition-fast ease-in;
}

.slide-in-right {
  animation: slideInRight $transition-base ease-out;
}

.slide-in-left {
  animation: slideInLeft $transition-base ease-out;
}

.slide-in-up {
  animation: slideInUp $transition-base ease-out;
}

.slide-in-down {
  animation: slideInDown $transition-base ease-out;
}

.spin {
  animation: spin 1s linear infinite;
}

.pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

// ============================================
// RESPONSIVE HELPERS
// ============================================

// Show/Hide on specific breakpoints
@include respond-to('md') {
  .hide-md {
    display: none !important;
  }
}

@include respond-to('lg') {
  .hide-lg {
    display: none !important;
  }
}

// Mobile only
@media (max-width: $breakpoint-md - 1) {
  .hide-mobile {
    display: none !important;
  }
}

// Desktop only
@media (min-width: $breakpoint-md) {
  .hide-desktop {
    display: none !important;
  }
}
